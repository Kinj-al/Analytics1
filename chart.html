<head>
     <!-- Google Tag Manager -->
         <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-TLDKZSK');</script>
    <!-- End Google Tag Manager -->
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
   <!--  <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-analytics.js"></script>
    <script src="https://static.fusioncharts.com/code/latest/fusioncharts.js"></script>-->
  </head>
  
  <p>
      Here's a simple Plotly plot - 
      <a href="https://bit.ly/1Or9igj">plotly.js documentation</a>
  </p>
  
  <div id="tester" style="width:90%;height:600px;"></div>
<body>
     <!-- Google Tag Manager (noscript) -->
     <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TLDKZSK"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <p>
        Here's a simple Plotly plot - 
        <a href="https://bit.ly/1Or9igj">plotly.js documentation</a>
    </p>
    <script type = "module">


        //window.addEventListener("load", genFunction);
    
        var cdata = [];
        var database = firebase.database();
        var ref = database.ref('users');
    //ref.orderByChild("Count").limitToLast(5).once('value', function(snapshot){
    
        var timeArray = [];
        var countArray = [];
    genFunction();
        function genFunction(data) {
    
            
    
    
            ref.orderByValue().on('child_added', function (snapshot) {
               // ref.once('value',function(snapshot){
            //console.log(snapshot.val().Count);
            //console.log(snapshot.val().Time);
            //console.log(snapshot.val().PageName);
            console.log(snapshot.val());
            timeArray.push(snapshot.val().Time);
           
            countArray.push(snapshot.val().Count);
    
            console.log(timeArray);
            console.log(countArray);
    
            var TESTER = document.getElementById('tester');
         
         Plotly.plot( TESTER, [{
        
          //x: [1, 0, 3, 0, 5],
          //y: [1, 2, 4, 8, 16], 
          x : countArray,
             y : countArray,
             type : 'bar',
             marker: {
            color: 'rgb(142,124,195)',
            opacity: 0.7,
            }
             
             //
         }]);
    
        });
       
    
    
        }
    
        
        
      </script>
</body>
  